{
  "name": "node-each",
  "description": "Node asynchronous for each that avoids blocking Node Event Loop",
  "main": "lib/index.js",
  "version": "1.0.1",
  "repository": {
    "type": "git",
    "url": "https://github.com/goncaloneves/node-each"
  },
  "bugs": {
    "url": "https://github.com/goncaloneves/node-each/issues"
  },
  "directories": {
    "lib": "lib",
    "test": "test"
  },
  "scripts": {
    "commit": "git-cz",
    "check-coverage": "istanbul check-coverage --statements 100 --branches 90 --functions 100 --lines 100",
    "report-coverage": "cat ./coverage/lcov.info | ./node_modules/.bin/codecov",
    "test": "istanbul cover -x *test.js _mocha test/test.js",
    "semantic-release": "semantic-release pre && npm publish && semantic-release post"
  },
  "keywords": [
    "node",
    "async",
    "for",
    "each",
    "no",
    "blocking",
    "event",
    "loop"
  ],
  "author": {
    "name": "Gonçalo Neves",
    "email": "me@goncaloneves.com"
  },
  "license": "MIT",
  "dependencies": {
    "bluebird": "2.10.2"
  },
  "devDependencies": {
    "chai": "^3.4.0",
    "codecov.io": "^0.1.6",
    "commitizen": "^2.3.0",
    "cz-conventional-changelog": "^1.1.4",
    "ghooks": "^0.3.2",
    "gulp": "^3.9.0",
    "gulp-eslint": "^1.0.0",
    "gulp-mocha": "^2.1.3",
    "istanbul": "^0.4.0",
    "mocha": "^2.3.3",
    "semantic-release": "^4.3.5"
  },
  "config": {
    "commitizen": {
      "path": "node_modules/cz-conventional-changelog"
    },
    "ghooks": {
      "pre-commit": "npm test && npm run check-coverage"
    }
  },
  "readme": "# Node Each\n\n[![semantic-release](https://img.shields.io/badge/%20%20%F0%9F%93%A6%F0%9F%9A%80-semantic--release-e10079.svg?style=flat-square)](https://github.com/semantic-release/semantic-release)\n[![Travis](https://img.shields.io/travis/goncaloneves/node-each.svg?style=flat-square)](https://travis-ci.org/goncaloneves/node-each)\n[![Codecov](https://img.shields.io/codecov/c/github/goncaloneves/node-each.svg?style=flat-square)](https://codecov.io/github/goncaloneves/node-each)\n[![npm](https://img.shields.io/npm/v/node-each.svg?style=flat-square)](https://www.npmjs.com/package/node-each)\n[![npm](https://img.shields.io/npm/l/node-each.svg?style=flat-square)](https://github.com/goncaloneves/node-each/blob/master/LICENSE)\n\n**N**(ode) **E**(each)\n\nIf you are doing 'heavy lifting' loops in Node.js you can fork and allocate a new thread. But what if you want to run the loop in the same process and distribute iterations through multiple Event Loop cycles? \n\nNode Each is here to solve the later. It avoids blocking Node.js Event Loop while performing asynchronous and intensive for each loops. It allows to set next iteration to be run on the next Event Loop cycle, giving the opportunity for Node to process queued events.\n\n## Install\n\n```bash\n$ npm install node-each\n```\n```javascript\nvar ne = require('node-each');\n```\n\n## Usage\n\n### ne.each(Array, [Callback], [Options])\n\n**Array: [*]**\n\nArray to run each loop.\n\n**Callback: Function(el, i)**\n\n* e{*} - iteration element\n* i{Number} - iteration index\n\nIf the callback function returns a Promise back to the iterator handler, the next iteration will only run after Promise fulfilment.\n\n**Options: Object{debug, on, when}**\n\n* debug{Boolean} - debug flag (default: false)\n* on{String} - iteration or time (default: iteration)\n* when{Number} - total iteration or total time in milliseconds (decimal allowed) to trigger next cycle (default: 1)\n\nTrigger next Event Loop cycle iteration based 'on' iteration number or time in milliseconds since the last cycle.\n\nBy default it will trigger based 'on' iteration every time it reaches 'when', in this case 1. Simply put on every loop iteration.\n\nNE uses [process.hrtime()](https://nodejs.org/api/process.html#process_process_hrtime) to calculate time, so decimals can be used to work with smaller units.\n\n**Returns: Promise{fulfilled(debug)}**\n\n**Debug: Object{average, cycles, duration, iterations, on, when}**\n\n* average{Number} - average iteration time (ms)\n* cycles{Number} - each total cycles\n* duration{Number} - each duration time (ms)\n* iterations{Number} - each iterations\n* on{String} - each on setting\n* when{String} - each when setting\n\n### ne.stats\n\n**Object{executing}: Number**\n\n* executing{Number} - number of each loops running at this moment\n\n## Examples\n\n```javascript\nvar ne = require('node-each');\n\nvar names = ['Helen', 'John', 'Peter', 'Jim'];\n```\n\n### On: Iteration\n\n```javascript\nvar options = {\n    debug: true\n};\n\nne.each(names, function(el, i){\n\n    console.log('Name', el + ' has index of ' + i);\n  \n}, options).then(function(debug) {\n\n    console.log('Finished', debug);\n  \n});\n\n// Output\n// Name Helen has index of 0 - Event Loop Cycle 1\n// Name John has index of 1 - Event Loop Cycle 2\n// Name Peter has index of 2 - Event Loop Cycle 3\n// Name Jim has index of 3 - Event Loop Cycle 4\n// Finished {\n//    average: 1.58539575,\n//    cycles: 4,\n//    duration: 6.341583,\n//    iterations: 4,\n//    on: 'iteration',\n//    when: 1\n// }\n```\n\n### On: Time\n\n```javascript\nvar options = {\n    debug: true,\n    on: 'time',\n    when: 150.000001 // equals to 150000001 nanoseconds\n};\n\n/** Simulate asynchronous loop operation */\nne.each(names, function(el, i){\n\n    return new Promise(function(resolve) {\n    \n        setTimeout(function(){\n\n            console.log('Name', el + ' has index of ' + i);\n            console.log('Loops executing', ne.stats.executing);\n          \n            resolve();\n          \n        }, 100);\n      \n    });\n  \n}, options).then(function(debug) {\n\n    console.log('Finished', debug);\n    console.log('Loops executing', ne.stats.executing);\n  \n});\n\n// Output\n// Name Helen has index of 0 - Event Loop Cycle 1\n// Loops executing 1\n// Name John has index of 1 - Event Loop Cycle 1\n// Loops executing 1\n// Name Peter has index of 2 - Event Loop Cycle 2\n// Loops executing 1\n// Name Jim has index of 3 - Event Loop Cycle 2\n// Loops executing 1\n// Finished { \n//    average: 105.3162665,\n//    cycles: 2,\n//    duration: 421.265066,\n//    iterations: 4,\n//    on: 'time',\n//    when: 150\n// }\n// Loops executing 0\n```\n\n## Dependency\n\n[Bluebird](https://github.com/petkaantonov/bluebird/)\n\n## Contribute\n\nNode Each module uses [semantic-release](https://github.com/semantic-release/semantic-release/) with [Commit Guidelines](https://github.com/angular/angular.js/blob/master/CONTRIBUTING.md#commit).\n\n```bash\n$ mkdir node-each && cd node-each\n$ git clone git@github.com:goncaloneves/node-each.git .\n$ npm install\n \n$ npm test # Tests with Coverage\n$ npm run commit # Commit\n$ gulp # Gulp Watch [Eslint, Test]\n$ gulp lint # Gulp Eslint\n$ gulp test # Gulp Tests\n```\n\n## License\n\nMIT License\n2015 © Gonçalo Neves",
  "readmeFilename": "README.md",
  "homepage": "https://github.com/goncaloneves/node-each",
  "_id": "node-each@1.0.1",
  "_shasum": "5d9436a2da2b6818653d999d50e64d65cdc4e5c5",
  "_from": "node-each@",
  "_resolved": "https://registry.npmjs.org/node-each/-/node-each-1.0.1.tgz"
}
